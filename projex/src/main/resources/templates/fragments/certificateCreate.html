<div class="flex flex-column justify-end items-center m-auto" th:fragment="certificateCreate">
    <!-- Conteúdo principal -->
    <div class="ml-[10rem] w-[59rem] max-w-md p-8 bg-white rounded-2xl shadow-2xl">

        <!-- Título -->
        <h2 class="text-3xl font-bold text-center text-gray-900 mb-6">Cadastrar Certificado</h2>

        <!-- Formulário -->
        <form th:action="@{/certificate/createdCertificate}" 
                th:object="${certificate}" 
                method="post" 
                enctype="multipart/form-data"
                class="space-y-5">

            <!-- Título -->
            <div class="flex flex-col">
                <label class="mb-2 font-semibold text-gray-700">Título:</label>
                <input type="text" th:field="*{titulo}" placeholder="Digite o título"
                       class="border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition"/>
            </div>
            <div class="flex flex-col autocomplete-container">
                <label class="mb-2 font-semibold text-gray-700">Instituição:</label>
                <input type="text" th:field="*{Instituicao}" placeholder="Digite a Instituição" name="instituicao" id="instituicaoInput" autocomplete="off"
                       class="border
                       border-gray-300 
                       rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition"/>
                       
                <ul id="instituicaoList" class="absolute z-10 w-[24rem] bg-zinc-900 border border-zinc-700 
                        rounded-md mt-[5rem] hidden max-h-48 overflow-y-auto">

                </ul>
            </div>
            <div class="flex flex-col autocomplete-container">
                <label class="mb-2 font-semibold text-gray-700">Tipo de Certificação:</label>
                <input type="text" th:field="*{typeCertificate}" placeholder="Digite o Tipo do certificado" name="certificado" id="TypeInput" autocomplete="off"
                       class="border
                       border-gray-300 
                       rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition"/>
                       
                <ul id="TypeList" class="absolute z-10 w-[24rem] bg-zinc-900 border border-zinc-700 
                        rounded-md mt-[5rem] hidden max-h-48 overflow-y-auto">

                </ul>
            </div>

            <!-- Descrição -->
            <div class="flex flex-col">
                <label class="mb-2 font-semibold text-gray-700">Descrição:</label>
                <textarea th:field="*{descricao}" rows="4" placeholder="Descrição detalhada"
                          class="border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition"></textarea>
            </div>

            <!-- Status -->
            <div class="flex flex-col">
                <label class="mb-2 font-semibold text-gray-700">Status:</label>
                <select th:field="*{status}"
                        class="border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition">
                    <option value="EM_ANDAMENTO">Em andamento</option>
                    <option value="CONCLUIDO">Concluído</option>
                    <option value="CANCELADO">Cancelado</option>
                </select>
            </div>

            <!-- Data de Conclusão -->
            <div class="flex flex-col">
                <label class="mb-2 font-semibold text-gray-700">Data de Conclusão:</label>
                <input type="date" th:field="*{dataConclusao}"
                       class="border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition"/>
            </div>

            <div class="flex flex-col">
                <label class="mb-2 font-semibold text-gray-700">Categoria:</label>

                <div id="tag-container"
                     class="border border-gray-300 rounded-lg px-4 py-3 min-h-[48px] flex flex-wrap gap-2 cursor-text "
                     >

                    <select name="categoria" 
                            id="categoria" 
                            th:field="*{category}" 
                            required 
                            class="w-full  border-none outline-none focus:outline-none " >
                        <option value="">Selecione a categoria</option>
                        <option 
                            th:each="cat : ${categorias}"
                            th:value="${cat.name()}"
                            th:text="${cat.label}">---</option>
                    </select>
                </div>

            </div>

            <div class="relative w-fit">

                <label 
                    for="fileInput"
                    id="uploadBtn"
                    class="relative inline-flex items-center gap-2 
                        bg-gray-100 border border-gray-300 w-[24rem] justify-center
                        px-4 py-2 rounded-lg cursor-pointer
                        hover:bg-gray-200 transition
                        overflow-hidden">

                    <!-- PROGRESSO -->
                    <div 
                        id="progressBar"
                        class="absolute inset-0 bg-purple-500 pointer-events-none hidden"
                        style="width: 0%">
                    </div>

                    <!-- CONTEÚDO -->
                    <div class="relative z-10 flex items-center gap-2">
                        <i class="bi bi-card-image text-gray-500 text-[18px]" id="icon"></i>

                        <span class="text-gray-600 text-[18px]" id="fileName">
                            Anexar certificado
                        </span>

                        <button 
                            type="button"
                            id="clearFile"
                            class="hidden text-gray-400 hover:text-red-500 transition ml-2">
                            <i class="bi bi-x-lg"></i>
                        </button>
                    </div>

                </label>

                <!-- INPUT FILE FORA DO LABEL -->
                <input 
                    type="file" 
                    name="anexo"
                    id="fileInput"
                    class="hidden">

            </div>

            <div class="flex justify-center gap-20">

                <!-- Botão de voltar -->
                <button onclick="history.back()"
                        class="bg-purple-600 hover:bg-purple-700 text-white font-bold px-8 py-3 rounded-xl shadow-lg hover:shadow-xl transition duration-300 flex items-center gap-2">
                    <i class="bi bi-arrow-left-circle"></i> Voltar
                </button>

                <!-- Botão Salvar -->
                <button type="submit"
                        class="bg-purple-600 hover:bg-purple-700 text-white font-bold px-8 py-3 rounded-xl shadow-lg hover:shadow-xl transition duration-300 flex items-center gap-2">
                    <i class="bi bi-floppy"></i>Salvar
                </button>
            </div>

        </form>

        <div th:if="${mensagemErro}" 
        role="alert" 
        id="alert"
        >
        <p th:text="${mensagemErro}" class="font-medium"></p>
    </div>
    
        <div th:if="${mensagemSucesso}" 
        role="alert" 
        id="alert-sucesso"
        th:text="${mensagemSucesso}">
        
    </div>

</div>
    <script src="/js/tags.js"></script>
</div>
